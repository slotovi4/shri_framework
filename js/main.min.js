class Store{constructor(t,e,a,s,i,h,r,o){this.page=t,this.data=e,this.title=a,this.titleEl=s,this.update=i,this.dataFunc=h,this.activeEl=r,this.savedData=o}setDefaultPage(t,e,a,s){let i,h=checkSavedData(s,e),r={};h?i=h:(i=getData(a,e),r.dataName=e,r.data=i,this.savedData.push(r)),""!=t&&i?(this.page=t,this.data=i,this.update=!0):this.update=!1}setPageTitle(t,e){""!=t&&""!=e?(this.titleEl=t,this.title=e,this.update=!0):this.update=!1}setActiveItems(t,e){let a=this.activeEl,s=[];t.forEach(t=>{t.classList.contains(e)&&s.push(t)}),s.length<1?this.activeEl=!1:this.activeEl=s,a!=this.activeEl?this.update=!0:this.update=!1}}function getData(t,e){var a=new XMLHttpRequest;let s=t+e;if(a.open("GET",s,!1),a.send(),200!=a.status)throw"getData Error "+a.status+": "+a.statusText+", "+s+" file not found";{let t=a.responseText;return JSON.parse(t)}}function checkSavedData(t,e){let a=!1;return t.forEach(t=>{let s=t;if(s){let t=s.dataName,i=s.data;if(e==t)return void(a=i)}}),a||!1}class Dispatcher{constructor(){this.defPage=!1,this.pageTitle=!1,this.newPage=!1}dispatch(t){t.forEach(t=>{let e=t,a=e.data,s=e.actionType,i=a.el,h=a.title,r=a.pageName,o=a.dataName,l=a.dataPath,n=a.dataFunc,c=a.dataActive,g=a.activeClass;void 0===n&&(n=!1),void 0===c&&(c=!1),"setDefaultPage"===s&&(this.store=new Store(r,{},h,i,!0,n,c,[]),this.store.setDefaultPage(r,o,l,this.store.savedData),this.defPage=!0),this.store&&(this.store.update=!1,"setPageTitle"===s&&this.store.title!=h&&(this.store.setPageTitle(i,h),this.pageTitle=!0),"setNewPage"===s&&this.store.page!=r&&(this.store.setDefaultPage(r,o,l,this.store.savedData),this.store.dataFunc=n,this.newPage=!0),"itemStatus"===s&&this.store.setActiveItems(c,g),this.register())})}register(){this.store&&this.store.update&&((this.defPage||this.newPage)&&(changePageTitle(this.store.titleEl,this.store.title),this.store.dataFunc&&changePageContent(this.store.data,this.store.dataFunc)),this.pageTitle&&changePageTitle(this.store.titleEl,this.store.title),this.defPage=!1,this.pageTitle=!1,this.newPage=!1)}getCurrentPage(){return this.store.page}getActiveItems(){return this.store.activeEl}}function changePageTitle(t,e){document.querySelectorAll(t).forEach(t=>{t.textContent=e})}function changePageContent(t,e){e(t)}const dataDispatcher=new Dispatcher;