class Store{constructor(t,e,s,a,i,h,r){this.page=t,this.data=e,this.title=s,this.titleEl=a,this.update=i,this.dataFunc=h,this.activeEl=r}setDefaultPage(t,e,s){let a=getData(s,e);""!=t&&a?(this.page=t,this.data=a,this.update=!0):this.update=!1}setPageTitle(t,e){""!=t&&""!=e?(this.titleEl=t,this.title=e,this.update=!0):this.update=!1}setActiveItems(t,e){let s=this.activeEl,a=[];t.forEach(t=>{t.classList.contains(e)&&a.push(t)}),a.length<1?this.activeEl=!1:this.activeEl=a,s!=this.activeEl?this.update=!0:this.update=!1}}function getData(t,e){var s=new XMLHttpRequest;let a=t+e;if(s.open("GET",a,!1),s.send(),200!=s.status)throw"getData Error "+s.status+": "+s.statusText+", "+a+" file not found";{let t=s.responseText;return JSON.parse(t)}}class Dispatcher{dispatch(t){t.forEach(t=>{let e=t,s=e.data,a=e.actionType,i=s.el,h=s.title,r=s.pageName,o=s.dataName,l=s.dataPath,n=s.dataFunc,c=s.dataActive,u=s.activeClass;void 0===n&&(n=!1),void 0===c&&(c=!1),"setDefaultPage"===a&&(this.store=new Store(r,{},h,i,!0,n,c),this.store.setDefaultPage(r,o,l)),this.store&&(this.store.update=!1,"setPageTitle"===a&&this.store.title!=h&&this.store.setPageTitle(i,h),"setNewPage"===a&&this.store.page!=r&&(this.store.setDefaultPage(r,o,l),this.store.dataFunc=n),"itemStatus"===a&&this.store.setActiveItems(c,u),this.register())})}register(){this.store&&this.store.update&&(changePageTitle(this.store.titleEl,this.store.title),this.store.dataFunc&&changePageContent(this.store.data,this.store.dataFunc))}getCurrentPage(){return this.store.page}getActiveItems(){return this.store.activeEl}}function changePageTitle(t,e){document.querySelectorAll(t).forEach(t=>{t.textContent=e})}function changePageContent(t,e){e(t)}